<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>girtby.net &#8211;   Can your router do this?</title>

<meta name="verify-v1" content="unGvQ7Jwj5liZb2PzH2ckduvpe8Ua3Ls0MONzCHQQn4=" />

<link rel="stylesheet" href="http://girtby.net/wp-content/themes/depo-clean/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/atom+xml" title="girtby.net Articles Feed" href="http://girtby.net/feed/atom/" />
<link rel="alternate" type="application/atom+xml" title="girtby.net Comments Feed" href="http://girtby.net/comments/feed/atom/" />

<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://arankine.myopenid.com/" />

<link rel="meta" href="http://girtby.net/labels.rdf" type="application/rdf+xml" title="ICRA labels" />
<meta http-equiv="pics-Label" content='(pics-1.1 "http://www.icra.org/pics/vocabularyv03/" l gen true for "http://girtby.net" r (n 0 s 0 v 0 l 2 oa 0 ob 0 oc 0 od 0 oe 0 of 0 og 0 oh 0 c 1) gen true for "http://www.girtby.net" r (n 0 s 0 v 0 l 2 oa 0 ob 0 oc 0 od 0 oe 0 of 0 og 0 oh 0 c 1))' />

<link rel="prev" href="http://girtby.net/archives/2005/06/16/mit-weblog-survey/" />
<link rel="next" href="http://girtby.net/archives/2005/06/21/science-shows-that-whales-are-purdy/" />

<link rel="pingback" href="http://girtby.net/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="girtby.net &raquo; Feed" href="http://girtby.net/feed/" />
<link rel="alternate" type="application/rss+xml" title="girtby.net &raquo; Comments Feed" href="http://girtby.net/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="girtby.net &raquo; Can your router do this? Comments Feed" href="http://girtby.net/archives/2005/06/19/can-your-router-do-this/feed/" />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
<script type='text/javascript' src='http://girtby.net/wp-content/themes/depo-clean/javascript/friendly_dates.js?ver=2.9-rare'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://girtby.net/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://girtby.net/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='girtby.net' href='http://girtby.net' />
<link rel='start' title='Thunderbirds Are Go-ne' href='http://girtby.net/archives/2004/09/20/thunderbirds-are-go-ne/' />
<link rel='prev' title='MIT Weblog Survey' href='http://girtby.net/archives/2005/06/16/mit-weblog-survey/' />
<link rel='next' title='Science Shows That Whales Are Purdy' href='http://girtby.net/archives/2005/06/21/science-shows-that-whales-are-purdy/' />
<meta name="generator" content="WordPress 2.9-rare" />
<link rel='canonical' href='http://girtby.net/archives/2005/06/19/can-your-router-do-this/' />
			<script type="text/javascript" src="http://girtby.net/wp-content/plugins/flickr-tag/js/flickrTagTooltips.js"></script>

			<link href="http://girtby.net/wp-content/plugins/flickr-tag/css/flickrTagTooltips.css" type="text/css" rel="stylesheet"/>
	
		<link href="http://girtby.net/wp-content/plugins/flickr-tag/css/flickrTag.css" type="text/css" rel="stylesheet"/>
	</head>
<body>
<div class="container">
	<div class="header">
        <div class="search">
            <form method="get" id="sform" action="http://girtby.net/">
                <input type="text" id="q" value="" name="s" size="15" />
			</form>
        </div><!-- end search -->
        			        <h1><a href="http://girtby.net/">this blog is girtby.net</a> 
            </h1>
	</div><!-- end header -->


<div class="blogads">

<!-- Your Stuff Here -->

</div>


    						
      <div class="post">
          <div class="metainfo">
              <p>Posted<br />
                <abbr class="published" title="Sun, 19 Jun 2005 21:57:02 -0400">19 June 2005 @ 9pm</abbr></p>
                <p>Tagged<br />
                <a href="http://girtby.net/archives/category/nerd-factor-x/" title="View all posts in Nerd Factor X" rel="category tag">Nerd Factor X</a></p>
                		    </div>
		    <div class="content">
		        <h3>Can your router do this? 
		        </h3>
		        <p><img src="/images/wrt54gs.jpg" alt="Linksys WRT54GS" class="lede" width="170" height="155"/>New toy at Chez Girtby: A <a href="http://www.linksys.com/products/product.asp?grid=33&amp;scid=35&amp;prid=610">Linksys WRT54GS</a>. Running the <a href="http://openwrt.org/">OpenWRT</a> linux distribution. Can your router do this?</p>

<pre><code> BusyBox v1.00 (2005.05.25-20:30+0000) Built-in shell (ash)
 Enter 'help' for a list of built-in commands.

   _______                     ________        __
  |       |.-----.-----.-----.|  |  |  |.----.|  |_
  |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
  |_______||   __|_____|__|__||________||__|  |____|
           |__| W I R E L E S S   F R E E D O M

 root@OpenWrt:~# ps -ax
   PID  Uid     VmSize Stat Command
     1 root        408 S   init
     2 root            SW  [keventd]
     3 root            SWN [ksoftirqd_CPU0]
     4 root            SW  [kswapd]
     5 root            SW  [bdflush]
     6 root            SW  [kupdated]
     7 root            SW  [mtdblockd]
    23 root            SWN [jffs2_gcd_mtd4]
    36 root        392 S   syslogd -C 16
    43 root        352 S   klogd
   364 root        408 S   udhcpc -i vlan1 -b -p /tmp/dhcp-wan.pid
   454 nobody      408 S   /usr/sbin/dnsmasq
   459 root        428 S   /usr/sbin/dropbear
   464 root        408 S   /usr/sbin/httpd -p 80 -h /www -r WRT54G Router
   509 root        412 S   init
   510 root        648 R   /usr/sbin/dropbear
   511 root        460 S   -ash
   514 root        384 R   ps -ax
 root@OpenWrt:~#
</code></pre>

<p>There is so much to like here. The WRT54G is small and silent, perfect for 24&#215;7 operation. It can happily coexist with visiting friends and relatives who don&#8217;t always relish the soothing fan noise of the server farm. There&#8217;s a nifty little 200MHz MIPS-based CPU with 32MB of RAM and 8MB of flash.</p>

<p>Also, OpenWRT is linux. But better than that it&#8217;s <em>stripped down to the bare useful minimum</em> linux, as you can see from the <code>ps</code> output above. You install the <a href="http://tracker.openwrt.org/">extra stuff</a> you want, as you need it, using an <code>apt-get</code> workalike called ipkg.</p>

<p>Installation was relatively painless, considering. The <a href="http://openwrt.org/OpenWrtDocs/Installing">doco</a> is a little intimidating, but contained most of the right information. The only slight hiccup was it didn&#8217;t describe which of the two &#8220;experimental&#8221; firmware images to use (jffs2 or squashfs?) and I guessed wrong. Then it took me a while to realise that the &#8220;boot_wait&#8221; NVRAM setting which I had used to enable TFTP upload of the initial firmware on boot hadn&#8217;t stuck, and needed to be turned on again before I could upload the right image. But all is well now.</p>

<p>I have learned to be pretty conservative when it comes to making changes to my router. So new toy is currently sitting behind my regular Netgear router (the one which is still <a href="/archives/2005/02/27/netgear-bugs/">corrupting broadcast packets</a> and restarting its wireless interface every 4 mins exactly) in a crazy double-NAT arrangement. The idea is that I&#8217;ll migrate my other hosts to the new Linksys box as it settles in (and I get used to it), and once all the hosts are sitting behind it, it will replace the Netgear as my internet router.</p>

<p>And do a whole lot more besides. I want to set it up to do <a href="http://lartc.org/">traffic shaping</a>, <acronym title="Wireless Distribution System">WDS</acronym>, <a href="http://people.ee.ethz.ch/~oetiker/webtools/mrtg/">bandwidth</a> <a href="http://iptraf.seul.org/">usage</a> <a href="http://www.ntop.org/">monitoring</a>, and lots of other Ã¼ber-geeky stuff. This is barely scratching the surface of what you can do with this great little box: check out the <a href="http://openwrt.org/OpenWrtDocs/Customizing">hardware pr0n</a>!</p>

<p>Can <em>you</em> hack a <a href="http://openwrt.org/OpenWrtDocs/Customizing#head-984ddd07d3fc87694614ea8c06d3581edad9d78c">VGA output</a> into <em>your</em> router?</p>
		        <br clear="left" />
		    </div>
        </div><!-- end post -->

			
<!-- You can start editing here. -->


<div id="comments" class="post">

	<h3 class="comments_headers">6 Comments</h3>

</div>
	
	
			
        <div class="post" id="comment-1150">
		    <div class="metainfo">
                <p>Posted by<br /><a href='http://brainsnorkel.com' rel='external nofollow' class='url'>Chris</a><br />
                <input type="hidden" name="post_date" value="Sun, 19 Jun 2005 21:57:02 -0400" />
                <abbr class="commented" title="Sun, 19 Jun 2005 21:57:02 -0400">19 June 2005 @ 9pm</abbr><br />
                <a href="#comment-1150">#</a></p>
			</div>
			<div class="content">
				<p>&gt;  in a crazy double-NAT arrangement</p>

<p>I resemble that statement.</p> 
							</div>
		<br clear="left" />
		</div>
			
        <div class="post" id="comment-1151">
		    <div class="metainfo">
                <p>Posted by<br />Peter<br />
                <input type="hidden" name="post_date" value="Sun, 19 Jun 2005 21:57:02 -0400" />
                <abbr class="commented" title="Sun, 19 Jun 2005 21:57:02 -0400">19 June 2005 @ 9pm</abbr><br />
                <a href="#comment-1151">#</a></p>
			</div>
			<div class="content">
				<p>Another interesting hackable device is the Linksys NSLU2. <a href="http://www.linksys.com/products/product.asp?grid=35&amp;scid=43&amp;prid=640" rel="nofollow">http://www.linksys.com/products/product.asp?grid=35&amp;scid=43&amp;prid=640</a></p>

<p>Again, a little, silent embedded box designed to samba share a USB drive. You can flash the firmware and do all sorts of interesting things with it. Check out:</p>

<p><a href="http://www.nslu2-linux.org/" rel="nofollow">http://www.nslu2-linux.org/</a></p>

<p>Why would you bother building specific embedded hardware when there are mass produced devices like the WRT54G and NSLU2 available off the shelf.</p> 
							</div>
		<br clear="left" />
		</div>
			
        <div class="post" id="comment-1152">
		    <div class="metainfo">
                <p>Posted by<br /><a href='http://girtby.net/archives/2005/06/22/dynamic-dns-on-the-cheap/' rel='external nofollow' class='url'>girtby.net  &amp;amp;raquo; Blog Archive   &amp;amp;raquo; Dynamic DNS on the Cheap</a><br />
                <input type="hidden" name="post_date" value="Sun, 19 Jun 2005 21:57:02 -0400" />
                <abbr class="commented" title="Sun, 19 Jun 2005 21:57:02 -0400">19 June 2005 @ 9pm</abbr><br />
                <a href="#comment-1152">#</a></p>
			</div>
			<div class="content">
				<p>[...] y email that FreeBSD sends me.   So there you have it. I guess I&#8217;ll migrate it to my new router at some point, but for now I&#8217;m happy.                                                                                     Th [...]</p> 
							</div>
		<br clear="left" />
		</div>
			
        <div class="post" id="comment-1153">
		    <div class="metainfo">
                <p>Posted by<br />BsAtHome<br />
                <input type="hidden" name="post_date" value="Sun, 19 Jun 2005 21:57:02 -0400" />
                <abbr class="commented" title="Sun, 19 Jun 2005 21:57:02 -0400">19 June 2005 @ 9pm</abbr><br />
                <a href="#comment-1153">#</a></p>
			</div>
			<div class="content">
				<p>&gt; The only slight hiccup was it didnât describe which of the two âexperimentalâ
&gt; firmware images to use (jffs2 or squashfs?) and I guessed wrong.</p>

<p>Nice comment,&#8230; It <em>would</em> be more useful then to say <em>which</em> image <em>is</em> the correct one. Statistics will only confirm that your chance is 50%. No need to submit others to the same pain <img src='http://girtby.net/wp-includes/images/smilies/icon_wink.gif' alt=';-)' class='wp-smiley' /> </p>

<p>&#8211;
BS</p> 
							</div>
		<br clear="left" />
		</div>
			
        <div class="post" id="comment-1154">
		    <div class="metainfo">
                <p>Posted by<br />alastair<br />
                <input type="hidden" name="post_date" value="Sun, 19 Jun 2005 21:57:02 -0400" />
                <abbr class="commented" title="Sun, 19 Jun 2005 21:57:02 -0400">19 June 2005 @ 9pm</abbr><br />
                <a href="#comment-1154">#</a></p>
			</div>
			<div class="content">
				<p>You are quite right, my apologies. The <del>jffs2</del> squashfs image is the correct image for new installs.</p>

<p>EDIT: D&#8217;oh!</p> 
							</div>
		<br clear="left" />
		</div>
			
        <div class="post" id="comment-1155">
		    <div class="metainfo">
                <p>Posted by<br /><a href='http://ubernooder.com' rel='external nofollow' class='url'>Josh</a><br />
                <input type="hidden" name="post_date" value="Sun, 19 Jun 2005 21:57:02 -0400" />
                <abbr class="commented" title="Sun, 19 Jun 2005 21:57:02 -0400">19 June 2005 @ 9pm</abbr><br />
                <a href="#comment-1155">#</a></p>
			</div>
			<div class="content">
				<p>how did you make the boot_wait setting stick?</p> 
							</div>
		<br clear="left" />
		</div>
		
	

	<!-- Comment Form -->

	    

			
				
<div class="posttopline">
	<span class="previous">&larr; <a href="http://girtby.net/archives/2005/06/16/mit-weblog-survey/" rel="prev">MIT Weblog Survey</a></span>
	<span class="next"><a href="http://girtby.net/archives/2005/06/21/science-shows-that-whales-are-purdy/" rel="next">Science Shows That Whales Are Purdy</a> &rarr;</span>
</div>

<br clear="all" />

    <div class="footer">
		
        <div class="first">
        <div id="text-318154731" class="widget widget_text"><h5 class="widgettitle">Archives</h5>			<div class="textwidget"><ul>
<li><a href="/archives/2009">2009</a></li>
<li><a href="/archives/2008">2008</a></li>
<li><a href="/archives/2007">2007</a></li>
<li><a href="/archives/2006">2006</a></li>
<li><a href="/archives/2005">2005</a></li>
<li><a href="/archives/2004">2004</a></li>
</ul></div>
		</div>		</div>

        <div class="sidebar">
        <div id="text-326846052" class="widget widget_text"><h5 class="widgettitle">Leveraged Synergy</h5>			<div class="textwidget"><p>Hello, I&#8217;m Alastair Rankine. I once had a blog, and you've found it. <a href="/about/">Would you like to know more?</a></p>
<p>From time to time I made offerings to the internet. <a href="/offerings/">Would you like some?</a></p>
</div>
		</div>        </div>

        <div class="last">
        <div id="linkcat-2" class="widget widget_links"><h5 class="widgettitle">Blogroll</h5>
	<ul class='xoxo blogroll'>
<li><a href="http://bjkeefe.blogspot.com">bjkeefe</a></li>
<li><a href="http://brainsnorkel.com">brainsnorkel</a></li>
<li><a href="http://deadlybloodyserious.com">Deadly Bloody Serious</a></li>
<li><a href="http://blog.alphajuliet.com/">follicle</a></li>
<li><a href="http://madbean.com/">madbean</a></li>
<li><a href="http://marxyblog.blogspot.com">marxy&#8217;s musing on technology</a></li>
<li><a href="http://mattrubinstein.com.au">mattrubinstein.com.au</a></li>
<li><a href="http://somethinkodd.com/oddthinking">OddThinking</a></li>

	</ul>
</div>
        </div>

	    </div><!-- end footer -->

        <br clear="all" />
        
		<div class="copyright">
        	        	<span class="previous">&larr; <a href="http://girtby.net">Back to Home</a></span>
                        <p>Powered by <a href="http://wordpress.org">WordPress</a> using the <a href="http://powazek.com/posts/516">DePo Clean Theme</a> <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/au/"><img alt="Creative Commons License" class="badge" width=80 height=15 src="http://i.creativecommons.org/l/by-sa/2.5/au/80x15.png" /></a></p>
            		</div>

	</div> <!-- end container -->
</body>
</html>
