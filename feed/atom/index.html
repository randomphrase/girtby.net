<?xml version="1.0" encoding="UTF-8"?><feed
  xmlns="http://www.w3.org/2005/Atom"
  xmlns:thr="http://purl.org/syndication/thread/1.0"
  xml:lang="en"
  xml:base="http://girtby.net/wp-atom.php"
   >
	<title type="text">girtby.net</title>
	<subtitle type="text">this blog is girtby.net</subtitle>

	<updated>2009-09-17T14:27:44Z</updated>
	<generator uri="http://wordpress.org/" version="2.9-rare">WordPress</generator>

	<link rel="alternate" type="text/html" href="http://girtby.net" />
	<id>http://girtby.net/feed/atom/</id>
	<link rel="self" type="application/atom+xml" href="http://girtby.net/feed/atom/" />

			<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[Last Post!]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/09/18/last-post/" />
		<id>http://girtby.net/?p=3909</id>
		<updated>2009-09-17T14:27:44Z</updated>
		<published>2009-09-17T14:27:12Z</published>
		<category scheme="http://girtby.net" term="Meta" />		<summary type="html"><![CDATA[On the 18th of September 2004, I unveiled the first post on girtby.net.

And today, exactly 5 years later, I&#8217;m posting the last.


Really?

Well, maybe not the last for ever, but I&#8217;m certainly not planning any further posts here for the forseeable future.

Some time after you read this I&#8217;ll be converting the blog to static HTML and [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/09/18/last-post/"><![CDATA[<p>On the 18th of September 2004, I unveiled the <a href="http://girtby.net/archives/2004/09/18/first-post/">first post</a> on girtby.net.</p>

<p>And today, exactly 5 years later, I&#8217;m posting the last.
<span id="more-3909"></span></p>

<h4>Really?</h4>

<p>Well, maybe not the last for ever, but I&#8217;m certainly not planning any further posts here for the forseeable future.</p>

<p>Some time after you read this I&#8217;ll be converting the blog to static HTML and moving to its new semi-permanent home courtesy of <a href="http://madbean.com/">Matt Quail</a>, to whom I am much indebted. The <a href="/archives/2004/12/20/girt-by-controver-sea/">painstakingly-chosen</a> domain name will remain and hopefully none of the links will break.</p>

<p>To the regular readers and commenters, thanks so much for making the effort to visit and contribute. I&#8217;ll leave the syndication feeds in place, so by all means stay subscribed on the off chance that I publish anything further here. By all means unsubscribe to the comments feed though.</p>

<h4>Why?</h4>

<p>Frankly I&#8217;m just not excited about it any more. I am not a naturally gifted writer &mdash; oh no stop it, you are too kind &mdash; and so each article took a huge amount of careful crafting and ruthless editing before it reaches even my low quality standards. After a while this just started to feel like work.</p>

<p>Other factors were in play also. Blogging as a whole seems to be in something of a decline, so there&#8217;s not that degree of inter-blogger interaction which we saw back in the heyday. Fewer bloggers, fewer posts, fewer readers. And for me, just not quite enough feedback or reward.</p>

<p>Also spammers are definitely one the reasons for closing the blog. I&#8217;m going to be fucking glad not to have to deal with their shitting in my nest.</p>

<p>I&#8217;d much rather close the blog rather than simply abandon it like most people seem to do. I offer no explanation for this.</p>

<h4>Highlights and Lowlights</h4>

<p>Here are some posts that I&#8217;m particularly proud of. You might wish to revisit them if you&#8217;re feeling particularly nostalgic or bored.</p>

<ul>
<li><a href="/archives/2008/07/31/bayes-theorem-1-mandatory-filtering-0/">Bayes&#8217; Theorem 1, Mandatory Filtering 0</a></li>
<li>The infamous <a href="/archives/2008/05/22/blogging-horror/">Blogging Horror</a> post. Years from now I&#8217;m going to introduce myself with &#8220;you may remember me from such incendiary blog posts as&#8230;&#8221;</li>
<li>My <a href="/archives/2008/05/11/developer-essentials/">Developer Essentials</a> manifesto. That post was about 5 years in the making.</li>
<li><a href="/archives/2008/02/08/vendor-lock-in/">Vendor Lock-In</a>, mainly because it got an approving link from Bruce Schneier</li>
<li><a href="/archives/2007/03/09/c-1-unicode-0/">C++ 1, Unicode 0</a> and <a href="/2006/12/18/the-other-kind-of-reentrant/">The Other Kind of Reentrant</a>, both coding war stories.</li>
<li>The one in which I <a href="/archives/2006/09/03/decloaking/">decloaked</a></li>
<li>Some <a href="/archives/2005/06/13/this-is-what-you-see-this-is-what-you-get/">extended</a> <a href="/archives/2006/01/22/wysiwyg-editors-forecast-calls-for-continued-suckage/">ranting</a> on the subject of (believe it or not) WYSIWYG editors.</li>
<li><a href="/archives/2006/01/08/ripleys-design-it-or-not/">Ripley&#8217;s Design It Or Not</a>, a moderately successful satirical UI rant.</li>
<li><a href="/archives/2005/10/26/the-virtual-furniture-police/">The Virtual Furniture Police</a>, a combined book review and rant against IT department idiocy.</li>
<li><a href="/archives/2005/10/07/internet-explorer-makes-me/">Internet Explorer Makes Me ☹</a>. And it still does.</li>
<li><a href="/archives/2005/08/22/no-patentisation-without-implementation/">No Patentisation without Implementation</a>. These days I feel even more revulsion for the patent system, and dirty when I think of my participation in it.</li>
<li><a href="/archives/2005/03/31/what-does-this-button-do/">What does this button do?</a> My first, and probably best, UI rant.</li>
<li><a href="/archives/2005/08/03/scheduled-task-slippage-and-breakage/">Scheduled Task Slippage and Breakage</a>. I wonder if this is fixed in Windows 7?</li>
<li>The <a href="/archives/2004/12/20/catachresis-of-the-year/">Catachresis of the Year</a> still makes me smile.</li>
</ul>

<div class="aside"><p>Had I the inclination to continue publishing this blog, I might have updated the Virtual Furniture Police article with an example from the NSW education department. They are handing out the federal government-sponsored laptops but are constricting them so desperately as to make them almost completely useless. No internet access, and no installing new software, even for teachers. WTF?</p></div>

<p>Without a doubt, the lowlight would have to be one individual who responded to the Blogging Horror post with some moderately offensive comments. And the spammers. Oh the spammers.</p>

<h4>What Next?</h4>

<p>Instead of blogging here, I intend to participate more actively on other forums (the <a href="/archives/2008/03/01/web-forums-considered-annoying/">terrible state</a> of forum software notwithstanding), microblogging at identi.ca, and other social networking sites.</p>

<p>I&#8217;ll try to keep the <a href="/about">about</a> page up to date with links to my various online activities. Feel free to drop by.</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/09/18/last-post/#comments" thr:count="2"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/09/18/last-post/feed/atom/" thr:count="2"/>
		<thr:total>2</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[Archiving Tweets]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/08/23/archiving-tweets/" />
		<id>http://girtby.net/?p=3905</id>
		<updated>2009-08-23T13:21:11Z</updated>
		<published>2009-08-23T12:14:05Z</published>
		<category scheme="http://girtby.net" term="Nerd Factor X" /><category scheme="http://girtby.net" term="archive" /><category scheme="http://girtby.net" term="backup" /><category scheme="http://girtby.net" term="twitter" />		<summary type="html"><![CDATA[If you&#8217;ve run Damon Cortesi&#8217;s handy curl command to download all (or the last 3200) tweets from your twitter account, you&#8217;ll have a directory full of files with names like user_timeline.xml?count=100&#38;page=1. Not only that but they include a large amount of redundant profile stuff in the &#60;user&#62; element. And not only that, but twitter sometimes [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/08/23/archiving-tweets/"><![CDATA[<p>If you&#8217;ve run <a href="http://dcortesi.com/2009/07/16/for-wil-wheaton/">Damon Cortesi&#8217;s handy curl command</a> to download all (or the last 3200) tweets from your twitter account, you&#8217;ll have a directory full of files with names like <code>user_timeline.xml?count=100&amp;page=1</code>. Not only that but they include a large amount of redundant profile stuff in the <code>&lt;user&gt;</code> element. And not only <em>that</em>, but twitter sometimes returns a &#8220;Twitter is over capacity&#8221; page instead of your tweets.</p>

<p>What we want to do is a) detect any files which don&#8217;t contain tweets, b) remove the redundant user profile, and c) combine the results into a single file.</p>

<p>Well, friends, here is a shell script to do exactly that. You&#8217;ll need zsh and xsltproc, both of which are standard on MacOS X and most sane Linuxen.</p>

<div class="aside"><p>zsh is needed to sort the input files in numeric, as opposed to lexicographic, order. If you know of a way to do this in bash, let me know&#8230;</p></div>

<p>Output is on stdout, so just redirect to your filename of choice:</p>

<pre><code>$ tweetcombine user_timeline.xml\?count=100\&amp;page=* \
    &gt; tweet_archive.xml
</code></pre>

<p><span id="more-3905"></span>Here&#8217;s the script:</p>

<pre><code>#!/bin/zsh

# Combine all of the twitter user_timeline.xml files specified on the command line into a single output
# Written by Alastair Rankine, http://girtby.net
# Licensed as Creative Commons BY-SA

input_args=()
for f in ${(on)*}; do
    [[ -f $f ]] || exit "Not a file: $f"
    input_args+="&lt;input&gt;${f//&amp;/&amp;amp;}&lt;/input&gt;"
done

xsltproc - &lt;&lt;EOF
&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE inputs [
  &lt;!ATTLIST xsl:stylesheet id ID #REQUIRED&gt;
]&gt;
&lt;?xml-stylesheet type="text/xml" href="#style1"?&gt;
&lt;inputs&gt;
  ${input_args}

  &lt;xsl:stylesheet id="style1" version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;

    &lt;xsl:output type="xml" indent="yes"/&gt;

    &lt;xsl:template match="*"&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:copy-of select="@*"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:template&gt;

    &lt;xsl:template match="statuses"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/xsl:template&gt;

    &lt;xsl:template match="user"/&gt;

    &lt;xsl:template match="xsl:stylesheet"/&gt;

    &lt;xsl:template match="input"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="document(.)/statuses"&gt;
          &lt;xsl:apply-templates select="document(.)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:message terminate="yes"&gt;&lt;xsl:value-of select="."/&gt; does not contain statuses element&lt;/xsl:message&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:template&gt;

    &lt;xsl:template match="inputs"&gt;
      &lt;statuses type="array"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/statuses&gt;
    &lt;/xsl:template&gt;

  &lt;/xsl:stylesheet&gt;
&lt;/inputs&gt;
EOF
</code></pre>

<p>I think this method of sticking filename arguments into an XSL document with an embedded stylesheet is quite a powerful way of processing XML documents with shell scripts. (Probably should put the <code>&lt;input&gt;</code> tags into a separate namespace though&#8230;)</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/08/23/archiving-tweets/#comments" thr:count="3"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/08/23/archiving-tweets/feed/atom/" thr:count="3"/>
		<thr:total>3</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[Sleeping Bloggy]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/08/03/sleeping-bloggy/" />
		<id>http://girtby.net/?p=3900</id>
		<updated>2009-08-05T13:07:10Z</updated>
		<published>2009-08-03T12:53:30Z</published>
		<category scheme="http://girtby.net" term="Meta" /><category scheme="http://girtby.net" term="Nerd Factor X" /><category scheme="http://girtby.net" term="amazon s3" /><category scheme="http://girtby.net" term="google app engine" /><category scheme="http://girtby.net" term="hosting" /><category scheme="http://girtby.net" term="wordpress" />		<summary type="html"><![CDATA[It should be apparent to prettymuch anyone who reads this blog that I have lost the impetus to publish regularly. Although I still have many things to say to the internet, it seems to be getting harder and harder to find the time to put these things in a blog form that I&#8217;m happy with.

But [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/08/03/sleeping-bloggy/"><![CDATA[<p>It should be apparent to prettymuch anyone who reads this blog that I have lost the impetus to publish regularly. Although I still have many things to say to the internet, it seems to be getting harder and harder to find the time to put these things in a blog form that I&#8217;m happy with.</p>

<p>But I&#8217;m also not happy with the concept of just abandoning the blog, as so many others seem to do. I like the idea of putting it into hibernation, where it still can be linked to and indexed in search engines, but just not active.</p>

<p>So I&#8217;ve been working out how to do that. It&#8217;s not as easy as I expected. And, yes, worth blogging about&#8230;</p>

<p><span id="more-3900"></span></p>

<h4>&#8220;Will I Dream, Dave?&#8221;</h4>

<p>I thought I wanted something quite straightforward. Basically I was going to convert the site into static HTML by walking over it with <code>wget</code> or similar. Then find a host who could serve it up cheaply and reliably.</p>

<p>The cheap part was a requirement but also an expectation. I just thought that someone somewhere would give me some hosting space for static files that would charge about the same as my domain renewal each year. I&#8217;m not interested in paying much more than that because, well. I might as well just keep paying the hosting plan I&#8217;m on now, and keep the blog open.</p>

<p>I also wanted the new hosting to have cool URIs that don&#8217;t change. So if, for example, you&#8217;ve bookmarked my insightful not-to-be-missed 2007 post on <a href="/archives/2007/04/22/it-sure-is-feisty/">fixing Ubuntu 7.04 display problems</a>, you&#8217;ll be happy to hear that I intended to make sure it serves you the same long-obsolete advice for many decades to come.</p>

<p>And that&#8217;s the real trick. As I found out, keeping the URIs the same, is not as easy as it sounds.</p>

<h4>wordpress.com</h4>

<p>This was the first thing I tried. wordpress.com offers free-to-inexpensive hosting and, hey, I&#8217;m already running wordpress, so it should be a snap to switch over. I&#8217;d just run the blog as-is with comments disabled and it would be just like in hibernation.</p>

<p>But then I read the fine print, and found that I wasn&#8217;t going to be able to keep my current theme with its <a href="/archives/2008/12/28/great-designers-steal-and-so-do-i/#comment-2268">famous</a> hand-tuned aside formatting. Not ideal, but not a show-stopper either. Also, importing the images and other assets would require involvement from wordpress support. Bit of a pain, but liveable.</p>

<p>So as an experiment I started exporting from my blog and then importing to wordpress.com. How well did this work? Well, about as well as you can expect with software that is not designed to <a href="/archives/2008/12/29/software-that-goes-clunk/">go clunk</a>. Of course, there is no error message to determine what the problem was, nor even an obvious way to erase all the partially-imported content.</p>

<h4>Amazon S3</h4>

<p>Having resolved by this stage that I was going to convert it to a static site and host it somewhere, I soon came upon the idea of using Amazon&#8217;s S3 service. I already had an account, and it looked like a great solution. Cheap, reliable and easy. (Pick any two.)</p>

<p>There are (at least) two problems with using Amazon S3 for this task.</p>

<p>Firstly there is a technical limitation with hosting a &#8220;naked&#8221; domain (ie girtby.net with no hostname). Basically the way you create a <a href="http://docs.amazonwebservices.com/AmazonS3/latest/VirtualHosting.html">virtual host on S3</a> is to create a &#8220;bucket&#8221; with the same name as your host, and then create a CNAME from your domain to that bucketname.s3.amazonaws.com. The problem is that you cannot create a CNAME on the root of a domain, it has to be from a hostname within that domain (eg www.girtby.net will work, girtby.net will not).</p>

<p>So that instantly breaks my URIs, but even if I could solve that problem there&#8217;s another limitation. Basically Amazon S3 is not a full hosting environment and doesn&#8217;t provide some common web server features. Most notably it won&#8217;t serve up / using /index.html.</p>

<p>So I would end up needing my own web server which would perform this redirection. But that defeats the purpose of using Amazon S3; if I had access to a reliable web server, I&#8217;d just use that to serve up the site and be done with it.</p>

<h4>Google App Engine</h4>

<p>Yes, I was quite amazed to discover that you can use Google&#8217;s App Engine as a host for an entirely static site. This is an interesting possibility because not only is it a real hosting service, and I can develop software (maybe even a blogging engine!) to bring my site back to life, should I be so inclined.</p>

<p>The plan is almost perfect, but has one flaw. Although Google seem to have once had the ability to host from a naked domain, that ability now seems to have been <a href="http://code.google.com/appengine/kb/general.html#naked_domain">revoked</a>. Which is a bit unfortunate, as it breaks my URIs.</p>

<p>So that&#8217;s really a problem, and one that I must admit I did not forsee when I started using the naked domain as the preferred domain for the blog.</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/08/03/sleeping-bloggy/#comments" thr:count="2"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/08/03/sleeping-bloggy/feed/atom/" thr:count="2"/>
		<thr:total>2</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[Bye Bye eMusic]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/07/11/bye-bye-emusic/" />
		<id>http://girtby.net/?p=3898</id>
		<updated>2009-07-11T11:49:35Z</updated>
		<published>2009-07-11T11:49:30Z</published>
		<category scheme="http://girtby.net" term="Cultcha" /><category scheme="http://girtby.net" term="Provocation" /><category scheme="http://girtby.net" term="emusic" /><category scheme="http://girtby.net" term="music" />		<summary type="html"><![CDATA[Well, it was good while it lasted, but I&#8217;ve just downloaded my last album from eMusic.

I was once quite enamoured with this service, so what changed? 

Well basically they changed their prices. And by that I mean they increased their prices. And by that I mean their prices went through the roof.

Up until this month [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/07/11/bye-bye-emusic/"><![CDATA[<p>Well, it was good while it lasted, but I&#8217;ve just downloaded my last album from eMusic.</p>

<p>I was once quite <a href="/archives/2008/05/14/emusic/">enamoured</a> with this service, so what changed? </p>

<p>Well basically they changed their prices. And by that I mean they increased their prices. And by that I mean their prices went through the roof.</p>

<p>Up until this month you could download 75 tracks/month for US$20. Now, you&#8217;ll pay US$31 for those tracks.</p>

<p>Obviously this isn&#8217;t the first time that someone has hiked their prices by 50%, but that&#8217;s not really the point of this post. Instead it&#8217;s the other, extremely deceptive, change that went along with the overt price hike. Your monthly eMusic fee no longer allows you to purchase 75 tracks; instead you&#8217;ll get 75 &#8220;credits&#8221;. They want you think that a credit equates to a single track, but it quite obviously doesn&#8217;t. If you&#8217;re purchasing by the album (and for many tracks you have to) then the number of credits required almost always exceeds the number of tracks.</p>

<p>For an admittedly extreme example, consider the epic post-rock album <cite>Lift Your Skinny Fists Like Antennas To Heaven</cite> by Godspeed You! Black Emperor. It has four 20 minute &mdash; mind-blowing and highly recommended &mdash; tracks. Before the pricing change, this was about 5% of the 75-track monthly quota. Now, downloading this album requires no fewer than <a href="http://www.emusic.com/album/godspeed-you-black-emperor-Lift-Your-Skinny-Fists-Like-Antennas-to-Heaven-MP3-Download/10909937.html">24 credits</a>, which is about a third of quota, and about a 600% increase. None of the tracks can be downloaded individually any more.</p>

<p>So you might think, regardless of the increase, that still works out at just over US$10 for an album, which sounds very fair. But this just begs the question: why don&#8217;t they just charge the US$10/album and be done with it?</p>

<p>The subscription plan and the &#8220;credits&#8221; and all that nonsense is just annoying, and that&#8217;s the main reason why I&#8217;m leaving. I can pay US$10/album at <a href="/archives/2007/10/09/easier-than-stealing/">Amazon</a> and I don&#8217;t have to worry about my monthly quota, rollovers, unused credits, the terrible website, the mysteriously &#8220;unavailable&#8221; albums or individual tracks, and all of the other specific problems with the eMusic service.</p>

<p>I admit I had a good ride. And maybe something had to change at eMusic anyway. The whole premise of charging per track is fraught with problems. The economics of this is predicated on 4 min radio-friendly pop songs, and just doesn&#8217;t work out for other types of music.</p>

<p>What I <em>really</em> want is to pay a fixed amount for a fixed <em>duration</em> of music. I&#8217;d easily pay US$1 per 10 minutes of music. It seems like absolutely the fairest and simplest way of doing doing things, and the way that eMusic could have changed while still keeping my business.</p>

<p>Failing that I&#8217;ll just pay per album. But not at eMusic.</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/07/11/bye-bye-emusic/#comments" thr:count="3"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/07/11/bye-bye-emusic/feed/atom/" thr:count="3"/>
		<thr:total>3</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[At The End Of One&#8217;s Tether]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/06/19/at-the-end-of-ones-tether/" />
		<id>http://girtby.net/?p=3894</id>
		<updated>2009-06-19T11:02:43Z</updated>
		<published>2009-06-19T11:02:40Z</published>
		<category scheme="http://girtby.net" term="Nerd Factor X" /><category scheme="http://girtby.net" term="Provocation" /><category scheme="http://girtby.net" term="at&amp;t" /><category scheme="http://girtby.net" term="iphone" /><category scheme="http://girtby.net" term="optus" /><category scheme="http://girtby.net" term="tethering" />		<summary type="html"><![CDATA[Many carriers, most notably AT&#38;T, but also others such as Optus, are getting a lot of bad press for charging their subscribers extra for &#8220;tethering&#8221; their iPhones to their laptops.

This does seem to be blatant gouging on their part, given that bytes are bytes, and regardless of whether they are destined for a phone or [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/06/19/at-the-end-of-ones-tether/"><![CDATA[<p>Many carriers, most notably AT&amp;T, but also others such as Optus, are getting a lot of bad press for charging their subscribers extra for &#8220;tethering&#8221; their iPhones to their laptops.</p>

<p>This does seem to be blatant gouging on their part, given that bytes are bytes, and regardless of whether they are destined for a phone or a tethered laptop, the cost is the same. This criticism is warranted in my opinion.</p>

<p>Carriers may claim that tethered laptops inevitably draw more traffic from individual subscribers. But I would suggest that the incremental traffic from a tethered laptop is a <em>lot</em> lower for the iPhone than for other 3G phones. Let&#8217;s face it, the iPhone is a pretty capable standalone device, and you&#8217;ll rarely need to break out the laptop to get online. Other phones are <em>far</em> inferior at browsing the net directly, and so I&#8217;d expect that there is a correspondingly larger proportion of traffic from tethered laptops of subscribers with these phones. This makes the additional pricing seem even more unfair.</p>

<p>But not all of the hate should be directed towards the carriers.</p>

<p>I am yet to see an answer to this question: how do the carriers know which traffic originates from the iPhone itself and which from a tethered laptop? I don&#8217;t know the answer definitively but I the iPhone must mark the tethered traffic somehow. I&#8217;m guessing that it must pass through the PPP session from the laptop, instead of terminating it in the phone and NATting the traffic.</p>

<p>Regardless, it is Apple that deserves at least some of the blame here for <em>enabling</em> the carriers to detect traffic in the first place. I know of no technical reason why they needed to do this; it sounds like a purely business decision. And one they didn&#8217;t need to make; surely the carriers are all Apple&#8217;s bitches at this point?</p>

<p>Boo, carriers who charge for tethering. Boo, Apple.</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/06/19/at-the-end-of-ones-tether/#comments" thr:count="2"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/06/19/at-the-end-of-ones-tether/feed/atom/" thr:count="2"/>
		<thr:total>2</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[Easiest $100 I&#8217;ll Ever Make]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/06/13/easiest-100-ill-ever-make/" />
		<id>http://girtby.net/?p=3890</id>
		<updated>2009-06-13T12:04:39Z</updated>
		<published>2009-06-13T11:56:31Z</published>
		<category scheme="http://girtby.net" term="Nerd Factor X" /><category scheme="http://girtby.net" term="Provocation" /><category scheme="http://girtby.net" term="c++" /><category scheme="http://girtby.net" term="monty hall" /><category scheme="http://girtby.net" term="puzzle" /><category scheme="http://girtby.net" term="wager" />		<summary type="html"><![CDATA[Recently, before boarding a flight up to Hamilton Island for a $WORK junket conference, I purchased a puzzle book. On the flight, I shared the puzzles amongst colleagues, and fun was had. One particularly tricky puzzle confounded us all, although I recognised it as a variant of the Monty Hall problem. Alarm bells should be [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/06/13/easiest-100-ill-ever-make/"><![CDATA[<p>Recently, before boarding a flight up to Hamilton Island for a $WORK <del>junket</del> conference, I purchased a puzzle book. On the flight, I shared the puzzles amongst colleagues, and fun was had. One particularly tricky puzzle confounded us all, although I recognised it as a variant of the <a href="http://en.wikipedia.org/wiki/Monty_Hall_problem">Monty Hall problem</a>. Alarm bells should be going off at this point for those who have debated the subject in the past&#8230;</p>

<p>Anyway, one colleague didn&#8217;t believe that the answer in the back of the book was correct, and he offered to bet that by running a computer simulation he could prove the book (and me) wrong. I&#8217;m not a betting person, but for some reason, possibly euphoria at the prospect of the upcoming <del>partying</del> seminars, I immediately accepted his bet, wagering $100.</p>

<p>What follows is my attempt to win that bet.</p>

<p><span id="more-3890"></span></p>

<p>So that there is no argument, I&#8217;ll reproduce the exact wording of the problem as stated in the puzzle book:</p>

<blockquote>
  <p><strong>90.</strong> Four different pieces of candy are placed in a bag. One is chocolate, one is caramel, and two are licorice. Without looking in the bag, I draw two pieces of candy from it, and place one of them, which is licorice, on a table.</p>
  
  <p>What are the chances that the second piece of candy I have in my hand is the other piece of licorice candy?</p>
</blockquote>

<p>My colleague said the answer is ⅓, simply because the candy in the hand can only be one of three other candies still unseen. Of course this is a classic Monty Hall conditional probability problem, and he is quite wrong.</p>

<p>The key insight to this puzzle is that when I (as the person stating the puzzle) am putting the piece of candy on the table I am <em>selecting</em> it. Just as Monty does when he picks the door with the goat. There&#8217;s no element of randomness.</p>

<p>So the correct way to assess the probability is to think about the possible combinations of candies in your hand. There are six: the chocolate and caramel, caramel and either licorice, chocolate and either licorice, and the two licorice. Now we know that one of these combinations, the chocolate and caramel, is not possible. There are five remaining possibilities, and one of these is the one we want. Hence the odds are ⅕.</p>

<p>Anyway the agreed method of settling the bet was to write a computer simulation, so I did just that. Here is the output of a sample run:</p>

<pre><code>Out of 1000000 tries, two licorices were extracted 200432 times.
Estimated probability = 0.200432
</code></pre>

<p>We have a winner. Thanks JT, cash will be fine.</p>

<p>Here is the C++ code:</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;tr1/array&gt;

const long iterations = 1000000;

enum candy {
    chocolate,
    caramel,
    licorice
};

int main(int argc, char *argv[])
{
    ::srand(::time(NULL));

    // Number of times we've pulled out two licorice from the bag
    long two_licorice = 0;

    for(long i = 0; i &lt; iterations;)
    {
        // put the candies in the bag
        std::tr1::array&lt;candy, 4&gt; bag = {{ chocolate, caramel, licorice, licorice }};

        // shuffle them
        std::random_shuffle(bag.begin(), bag.end());

        // pull out two
        std::tr1::array&lt;candy, 2&gt; hand = {{ bag[0], bag[1] }};

        // At least one of the candies we pick out must be a licorice otherwise it doesn't count.
        if (hand[0] != licorice &amp;&amp; hand[1] != licorice)
            continue;

        // Count if we've got both licorice
        if (hand[0] == licorice &amp;&amp; hand[1] == licorice)
            ++two_licorice;

        ++i;
    }

    std::cout &lt;&lt; "Out of " &lt;&lt; iterations
              &lt;&lt; " tries, two licorices were extracted " &lt;&lt; two_licorice &lt;&lt; " times.\n"
              &lt;&lt; "Estimated probability = "
              &lt;&lt; static_cast&lt;double&gt;(two_licorice) / static_cast&lt;double&gt;(iterations)
              &lt;&lt; std::endl;

    return 0;
}
</code></pre>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/06/13/easiest-100-ill-ever-make/#comments" thr:count="4"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/06/13/easiest-100-ill-ever-make/feed/atom/" thr:count="4"/>
		<thr:total>4</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[I Fought The Gorm]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/05/12/i-fought-the-gorm/" />
		<id>http://girtby.net/?p=3884</id>
		<updated>2009-05-11T23:15:21Z</updated>
		<published>2009-05-11T23:13:15Z</published>
		<category scheme="http://girtby.net" term="Meta" /><category scheme="http://girtby.net" term="Personal" /><category scheme="http://girtby.net" term="furniture" /><category scheme="http://girtby.net" term="garage" /><category scheme="http://girtby.net" term="hardware" /><category scheme="http://girtby.net" term="ikea" />		<summary type="html"><![CDATA[There&#8217;s a kind of internally-generated tension that builds up when you haven&#8217;t blogged for a while. It&#8217;s not as bad as that other kind of tension which builds up over time, but it&#8217;s still there in the back of your mind. And after a while you need to do something, anything, to release the tension.

So [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/05/12/i-fought-the-gorm/"><![CDATA[<p><a href="http://girtby.net/assets/2009/05/garage-shelves.jpg"><img src="http://girtby.net/assets/2009/05/garage-shelves-199x300.jpg" alt="Garage Shelves" title="garage-shelves" width="199" height="300" class="size-medium wp-image-3883 lede" /></a>There&#8217;s a kind of internally-generated tension that builds up when you haven&#8217;t blogged for a while. It&#8217;s not as bad as that other kind of tension which builds up over time, but it&#8217;s still there in the back of your mind. And after a while you need to do something, anything, to release the tension.</p>

<p>So this is what I&#8217;m reduced to. Blogging about shelves that I put up last weekend. Yes, shelves.</p>

<p>Those skilled in the art of home ownership will recognise instantly these as Ikea Gorm. But look closely, see how they wrap around the down-pipe? Remember I&#8217;m <a href="/archives/2009/01/11/they-dont-call-it-hardware-for-nothing/">not</a> a hardware guy. So I&#8217;m quite proud of myself for cutting one of the planks in each shelf and using the off-cut to bind it to it&#8217;s neighbour. Bit of a hack, but I defy you carpenters to come up with a better solution.</p>

<p>Another thing to note is that only suckers put together furniture with an allen key. Power drills FTW.</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/05/12/i-fought-the-gorm/#comments" thr:count="1"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/05/12/i-fought-the-gorm/feed/atom/" thr:count="1"/>
		<thr:total>1</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[Headphone Update]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/03/23/headphone-update/" />
		<id>http://girtby.net/?p=3848</id>
		<updated>2009-03-23T11:47:06Z</updated>
		<published>2009-03-23T09:44:43Z</published>
		<category scheme="http://girtby.net" term="Linkpimpin&#039;" /><category scheme="http://girtby.net" term="Or Something" /><category scheme="http://girtby.net" term="denon" /><category scheme="http://girtby.net" term="headphone" /><category scheme="http://girtby.net" term="ultimate ears" />		<summary type="html"><![CDATA[So you might remember reading the previous article about headphones. At the time you might have wondered to yourself whether I could get any more crazy-ass obsessed and drop even more ridiculous quantities of cash on these things.

If you have, I&#8217;m happy to say yes. Yes, I can.

The two headphones described below are about as [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/03/23/headphone-update/"><![CDATA[<p>So you might remember reading the <a href="/archives/2007/08/29/strapping-a-motorcycle-to-your-head/">previous</a> article about headphones. At the time you might have wondered to yourself whether I could get any more crazy-ass obsessed and drop even more ridiculous quantities of cash on these things.</p>

<p>If you have, I&#8217;m happy to say yes. Yes, I can.</p>

<p>The two headphones described below are about as much as I can imagine spending on what are basically little speakers that you strap to your head. So this article isn&#8217;t so much a review as a freakshow; check out the guy with the weird obsession and the lack of self-restraint!</p>

<p><span id="more-3848"></span></p>

<h4>Denon AH-D5000</h4>

<p><img src="/assets/2009/03/d5000.jpg" alt="Denon AH-D5000" border="0" width="236" height="343" class="lede" />These are the big brother to the D2000s that I mentioned in my last article. Thanks to an uncharacteristically well-timed purchase, I managed to get these for US$425 from <a href="http://www.amazon.com/Denon-AHD5000-AH-D5000-Reference-Headphones/dp/B000MVEC10/ref=pd_bbs_sr_1?ie=UTF8&amp;s=electronics&amp;qid=1237807368&amp;sr=8-1">Amazon</a>. They went up massively after I bought them, and I see they are now back around that price, but the AUD has dropped significantly.</p>

<p>US$450-odd is a lot of cash for headphones, and I&#8217;ll be the first to acknowledge that fact. What&#8217;s more, the D2000s are almost US$200 cheaper, and the difference is incredibly difficult to justify in objective terms. As I said before, the D2000s are already a fantastic headphone. Supremely comfortable and capable headphones that are easy to drive. Really, there&#8217;s no rational reason to upgrade them.</p>

<p>However, upgrading to the D5000s is not a decision I regret in the slightest. To my ears the D2000s suffer from very mild boominess in the bass department which is tamed nicely by the Real Mahogany Cups of the D5000s. Or maybe it&#8217;s some other bit of audiophile wankery.</p>

<p>I like music, and I especially like to hear it with as much clarity, impact and presence as possible. There&#8217;s nothing better on a Friday night than to kick back with some favourite tunes, some quality headphones and a glass or two of red wine. The D5000s are frankly perfect for this job. I&#8217;m pretty sure that without going for the insane Senheisser HD800s (at a wallet-busting AUD2400!) you&#8217;re really not going to do any better.</p>

<h4>Ultimate Ears Triple-Fi 10vi</h4>

<p><img src="/assets/2009/03/triple-fi-10vi.jpg" alt="Ultimate ears Triple-Fi 10vi" border="0" width="400" height="400" class="lede" />You can&#8217;t sit around all the time drinking wine and listening to ridiculous headphones. Oh no, not by a long shot. Sometimes you&#8217;ve got to get out on the street. And listen to ridiculous headphones.</p>

<p>Behold the Ultimate Ears Triple-Fi 10vi <abbr title="In-Ear Monitors">IEM</abbr>s. You stick them in your ear and instead of hearing the sounds of nature, children&#8217;s laughter, oncoming semi-trailers, and so forth, you hear &#8230; whatever you want to hear. It&#8217;s amazing.</p>

<p>As I alluded to last time, the big selling point about the IEM is that it blocks sound from outside. This means you don&#8217;t <em>need</em> noise-cancelling and all that nonsense. It also means you don&#8217;t need to destroy your hearing trying to drown out the noises around you. In summary, good IEMs are basically earplugs with speakers in them.</p>

<p>Last time around I didn&#8217;t have a choice for an IEM. I tried the little brother to these, the Super-Fi 4vi. Prettymuch the only claim to fame for those was the fact that they would fit into the original iPhone headphone jack. But they sounded awful, so I ditched them.</p>

<p>Later, in a moment of bonus-fuelled excitement, I clicked <a href="http://headphones.com.au/psingle?productID=398">a button</a> and was A$640 the poorer. But when the Triple-Fis arrived, I was so much the richer. After some time trying out the different tips and getting used to different insertion techniques (yeah, I know, that&#8217;s what she said) they sound absolutely amazing. Better than most full-size headphones out there, in fact.</p>

<p>Once you&#8217;ve got the secret of getting the &#8220;seal&#8221; just right, they are quite comfortable, and the sound is incredible. It&#8217;s obviously more in-the-head than the Denons but the frequency response is amazing. From the deepest bass to the crispest treble notes, all emanating from these tiny little speakers stuck in your ear canals.</p>

<p>Had a bad day? Seriously, get yourself a pair of these and a portable music player, then go out into the evening and walk the streets. Great way to clear the head.</p>

<p>But look both ways before crossing the road, because you won&#8217;t hear that bus otherwise.</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/03/23/headphone-update/#comments" thr:count="2"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/03/23/headphone-update/feed/atom/" thr:count="2"/>
		<thr:total>2</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[Precisely Wrong]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/02/25/precisely-wrong/" />
		<id>http://girtby.net/?p=3868</id>
		<updated>2009-02-25T11:04:54Z</updated>
		<published>2009-02-25T10:36:06Z</published>
		<category scheme="http://girtby.net" term="Or Something" /><category scheme="http://girtby.net" term="Verisimilitude" /><category scheme="http://girtby.net" term="media watch" /><category scheme="http://girtby.net" term="salyut 7" />		<summary type="html"><![CDATA[Dan reminds me of a story I heard on an ancient Media Watch episode. It&#8217;s Stuart Littlemore-era Media Watch, and is sadly not in the otherwise extensive ABC online archives. hence you&#8217;ll have to rely on my somewhat hazy recollection. Don&#8217;t worry though, I may have forgotten some of the details, but I remember the [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/02/25/precisely-wrong/"><![CDATA[<p><a href="http://dansdata.blogsome.com/2009/02/18/the-suspect-is-1828800-microns-tall-and-his-irises-reflect-465-nanometre-light/">Dan</a> reminds me of a story I heard on an ancient <a href="http://en.wikipedia.org/wiki/Media_Watch_(TV_program)">Media Watch</a> episode. It&#8217;s Stuart Littlemore-era Media Watch, and is sadly not in the otherwise extensive ABC <a href="http://www.abc.net.au/mediawatch/transcripts/">online archives</a>. hence you&#8217;ll have to rely on my somewhat hazy recollection. Don&#8217;t worry though, I may have forgotten some of the details, but I remember the punchline.</p>

<p>The story was about a satellite that was crashing to earth. It was almost certainly <a href="http://en.wikipedia.org/wiki/Salyut_7">Salyut 7</a>, which came down in 1991. The memory of Skylab, which crashed in Australia in 1977, was still present in people&#8217;s minds. As always, the media was anxious for a local angle, and the possibility of a Skylab re-run, with an added dash of panic-mongering, was too tempting for them to resist. </p>

<p>Media Watch tracked the published predictions of the crash site as the re-entry date approached. </p>

<p>A few weeks out, some media outlets reckoned that that the satellite would fall somewhere in the Indian Ocean, Australia, or the Pacific.</p>

<p>A week out, the predictions narrowed to mainland Australia.</p>

<p>Days away, and it looks more like Western Australia. Towns such as Kalgoorlie are becoming extremely worried at this point. Rumours abound of satellite crash insurance being sold to worried locals.</p>

<p>On February 7 1991, Salyut 7 crashed to earth.</p>

<p>In South America.</p>

<p>Littlemore delivered the punchline, declaring the reporting as &#8220;a lesson on the difference between precision and accuracy.&#8221;</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/02/25/precisely-wrong/#comments" thr:count="0"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/02/25/precisely-wrong/feed/atom/" thr:count="0"/>
		<thr:total>0</thr:total>
	</entry>
		<entry>
		<author>
			<name>alastair</name>
						<uri>http://girtby.net</uri>
					</author>
		<title type="html"><![CDATA[Staging Wordpress With Bazaar]]></title>
		<link rel="alternate" type="text/html" href="http://girtby.net/archives/2009/02/24/staging-wordpress-with-bazaar/" />
		<id>http://girtby.net/?p=3851</id>
		<updated>2009-03-22T10:25:07Z</updated>
		<published>2009-02-24T11:03:18Z</published>
		<category scheme="http://girtby.net" term="Meta" /><category scheme="http://girtby.net" term="Nerd Factor X" /><category scheme="http://girtby.net" term="bzr" /><category scheme="http://girtby.net" term="vcs" /><category scheme="http://girtby.net" term="wordpress" />		<summary type="html"><![CDATA[Version Control Systems, I&#8217;ve had a few. But then again, too few to mention.

Keen observers will have noted that I have tended to blog each time I try out a new version control system, and this really isn&#8217;t an exception. Except that, well I&#8217;m not just trying it out, I actually use Bazaar daily at [...]]]></summary>
		<content type="html" xml:base="http://girtby.net/archives/2009/02/24/staging-wordpress-with-bazaar/"><![CDATA[<p>Version Control Systems, I&#8217;ve had a few. But then again, too few to mention.</p>

<p>Keen observers will have noted that I have tended to blog each time I try out a new version control system, and this really isn&#8217;t an exception. Except that, well I&#8217;m not just trying it out, I actually use <a href="http://bazaar-vcs.org/">Bazaar</a> daily at <code>$WORK</code>, so and this is like after-hours practice.</p>

<p>Anyway, I wanted to share this because I&#8217;ve found that maintaining a staging and production installation of wordpress, complete with custom modifications and a collection of plugins, is a problem ideally solved by a distributed source control. Plus I really like Bazaar, and wanted to show how easy it can be.</p>

<p><span id="more-3851"></span></p>

<p>I refer to two different machines here, one of which is the production server (ie my hosting provider), and one of which is the staging server (ie my personal machine). Don&#8217;t let the fancy terminology put you off; mentally substitute &#8220;my box&#8221; and &#8220;their box&#8221; if it helps you.</p>

<h4>Setting up a Local Wordpress Instance</h4>

<p>On my staging server I branched the wordpress source from <a href="https://code.launchpad.net/wordpress">launchpad&#8217;s</a> Wordpress repository, which is regularly synced with the official repository:</p>

<pre><code>[s] $ bzr branch lp:wordpress
</code></pre>

<p>[I'll use an <code>[s]</code> to denote commands run on a staging server, and <code>[p]</code> for commands run on the production server.]</p>

<p>This command creates a "working tree" of the wordpress source code &mdash; a set of files and directories &mdash; and an accompanying repository of revisions. At any time the working tree corresponds to one of the revisions in the repository, plus any uncommitted changes. Each commit creates a new revision in the repository. Pretty standard stuff really.</p>

<p>So for a new wordpress installation I add the wp-config.php file and commit it:</p>

<pre><code>[s] $ bzr add wp-config.php
[s] $ bzr commit -m "Added config file"
</code></pre>

<p>See the <a href="http://codex.wordpress.org/MacOS_X_Local_Mirror">codex</a> for other local setup instructions, I just want to focus on the source control tool for now.</p>

<p>Unless you've used distributed version control systems before, you might be a bit wary at this point, perhaps wondering what happens when I next communicate with the upstream repository. But fear not, this is exactly the point of a DVCS. I've created an independent branch, and the parent branch doesn't even need to know about mine. So, I can quite happily make changes of my own and also merge in upstream changes, knowing that it is all tracked correctly.</p>

<p>But for now let's look at going the other way: publishing my changes to the world.</p>

<h4>Uploading to the Production Server</h4>

<p>One of the cool things about Bazaar is that it supports many different protocols for publishing branches. So for example, I can just push my branch to the hosting server using sftp:</p>

<pre><code>[s] $ bzr push sftp://girtby.net/home/alastair/wordpress
</code></pre>

<p>This will create a repository on the remote server containing all the revisions in my local repository. It will not, however, create an associated working tree. Bazaar does not (yet?) support updating a working tree over sftp. I guess there are too many potential issues with local conflicts and such. Anyway the solution is to ssh into the production box and do a checkout of the published branch:</p>

<pre><code>[p] $ cd ~/wordpress
[p] $ bzr co .
</code></pre>

<p>What's that? You don't have Bazaar installed on your hosting provider? No problem - all you need is python. Just extract Bazaar into your home directory somewhere, add the bin directory to your path, and you're away. You don't even need to compile anything.</p>

<p>Of course there are many other tasks to set up a production wordpress, but again let's just focus on getting a Bazaar branch associated with the source files.</p>

<h4>Another Way</h4>

<p>Of course you could bootstrap everything the other way around. Start with a working wordpress installation on your production server, create a bazaar repository for it, then copy <em>that</em> to your local machine. This would be something like:</p>

<pre><code>[p] $ cd ~/wordpress
[p] $ bzr init .
[p] $ bzr add .
[... bzr rm --keep or bzr ignore the files you don't want ...]
[p] $ bzr commit -m "initial checkin"
</code></pre>

<p>You would then branch it locally using:</p>

<pre><code>[s] $ bzr branch sftp://server/path/to/wordpress
</code></pre>

<h4>Staying in Sync</h4>

<p>At this point you have two Bazaar branches, and they can easily be kept in sync as follows. First let's make sure we're running the latest wordpress on our staging server:</p>

<pre><code>[s] $ bzr merge lp:wordpress
</code></pre>

<p>This just says to merge the latest changes from upstream. As always with merging there is the possibility of a conflict; you make a change that conflicts with the change on the merge source. In general Bazaar is very good at handling these, and anyway you're very unlikely to encounter them unless you're making modifications to the Wordpress core.</p>

<p>At this stage it's a great idea to test the installation locally. Hypothetically, if there were any <a href="/archives/2008/12/29/software-that-goes-clunk/">unit tests</a>, you'd run them at this point. Otherwise, you can just check that the articles display properly, the admin interface works, and whatever else.</p>

<p>You can even see a summary of the changes that you're merging:</p>

<pre><code>[s] $ bzr status -v
modified:
  wp-admin/admin-ajax.php
  wp-admin/custom-header.php
  [... snip ...]
pending merges:
  westi 2009-02-22 Focus on the first blank field when asking for credentials for upgrade/instal...
    ryan 2009-02-22 Allow editing all of a plugin's files. see #6732
    westi 2009-02-22 Wrap the apply_filters call in a function_exists check as this can be calle...
    [... snip ...]
</code></pre>

<p>If everything looks OK, commit and push it up to the production server.</p>

<pre><code>[s] $ bzr commit -m "merge from upstream"
[s] $ bzr push
</code></pre>

<p>It should have remembered the push location from last time. Also, just like last time the working tree will need to be updated:</p>

<pre><code>[p] $ bzr up
</code></pre>

<h4>Eject! Eject!</h4>

<p>So I've found wordpress trunk to be fairly stable, but should I ever need it, the DVCS provides a safety net.</p>

<p>If I discover a problem after merging in the latest upstream changes, I can quickly revert simply using the entirely surprising:</p>

<pre><code>[p] $ bzr revert
</code></pre>

<p>If, on the other hand I only discover the problem after pushing up to the production server, it's still quite easy:</p>

<pre><code>[p] $ bzr uncommit
[p] $ bzr update
</code></pre>

<p>I can propagate that change back to my staging server by merging <em>back</em>:</p>

<pre><code>[s] $ bzr merge sftp://girtby.net/home/alastair/wordpress
</code></pre>

<p>But like I said, I haven't had to use this.</p>

<h4>Synchronising Media</h4>

<p>Changes made on the production server are generally easy to sync back to the staging server - I just download a database dump and import it locally. However media such as images are special because they are not stored in the database. Hence you need a way of getting them back to the staging server. I wonder what the answer could be?</p>

<p>Yep, just commit the changes on the production server and merge them back:</p>

<pre><code>[p] $ bzr add assets/2009/01/funny_picture.jpg
[p] $ bzr commit -m "Added funny picture"

[s] $ bzr merge sftp://girtby.net/home/alastair/wordpress
</code></pre>

<p>As noted before, the add command can recursively add all files in a directory, so you don't even need to specify the files individually.</p>

<h4>Plugins/Themes</h4>

<p>Plugins and themes are handled just like any other change. Just extract the plugin to the relevant directory, and add it to the repository:</p>

<pre><code>[s] $ unzip ~/Downloads/coolplugin.zip
[s] $ bzr add coolplugin
</code></pre>

<p>At this point I'd probably activate and test the plugin locally, then commit and push to the production server as before.</p>

<p>Bazaar can also track file renames, deletions and moves, but you obviously have to tell it about them. So when coolplugin is updated, be sure to tell Bazaar about any relevant changes before committing:</p>

<pre><code>[s] $ bzr mv --after coolplugin/oldandbroken.php coolplugin/newhotness.php
</code></pre>

<p>The <code>--after</code> switch tells Bazaar not to actually do the move, instead it's already happened and we're just recording the fact.</p>

<h4>Why Not...</h4>

<p>... Wordpress auto-update? Put simply, I don't trust it. Will it let me manage my own patches to wordpress should they be <a href="/archives/2008/12/01/and-were-back/#comment-1946">needed</a>? I don't think so. Also: FTP? What decade is this? Even FTPS, sheesh.</p>

<p>... git? Well no reason particularly. I've dabbled with git, but it never really <em>clicked</em> for me. The concepts and terminology and command set still seem slightly obscure to me: "Want to check in your changes? Just use 'git albatross'! Want to view checkin comments from the most recent merge? No problem, 'git ham-sandwich' is at your fingertips!" OK, I exaggerate a little.</p>

<p>... just shut up already? Oh, OK then.</p>
]]></content>
		<link rel="replies" type="text/html" href="http://girtby.net/archives/2009/02/24/staging-wordpress-with-bazaar/#comments" thr:count="2"/>
		<link rel="replies" type="application/atom+xml" href="http://girtby.net/archives/2009/02/24/staging-wordpress-with-bazaar/feed/atom/" thr:count="2"/>
		<thr:total>2</thr:total>
	</entry>
	</feed>
